(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mfa"],{"2e4f":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-row",{staticStyle:{"min-height":"100vh"},attrs:{type:"flex",justify:"center",align:"middle"}},[o("a-col",{attrs:{span:"12"}},[e.loginError?o("div",[o("a-alert",{staticStyle:{width:"100%"},attrs:{message:"二次认证失败",description:e.loginError,type:"error"}})],1):e._e(),o("a-form-model",e._b({ref:"mfaForm",attrs:{model:e.model,rules:e.rules}},"a-form-model",e.layout,!1),[o("a-form-model-item",{attrs:{label:"发送方式",prop:"mfaType"}},[o("a-radio-group",{model:{value:e.model.mfaType,callback:function(t){e.$set(e.model,"mfaType",t)},expression:"model.mfaType"}},[o("a-radio",{attrs:{value:"0"}},[e._v("短信")]),o("a-radio",{attrs:{value:"1"}},[e._v("电子邮件")])],1)],1),o("a-form-model-item",{attrs:{label:"验证码","has-feedback":"",prop:"code"}},[o("a-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.model.code,callback:function(t){e.$set(e.model,"code",t)},expression:"model.code"}},[o("a-button",{attrs:{slot:"addonAfter",type:"link",disabled:!e.canCountDownClick},on:{click:e.resend},slot:"addonAfter"},[e._v(e._s(e.countDownLabel))])],1)],1),o("a-form-model-item",e._b({},"a-form-model-item",e.tailFormItemLayout,!1),[o("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("mfaForm")}}},[e._v("验证并登录")])],1)],1)],1)],1)},n=[],r={data:function(){return{countDownLabel:"发送验证码",countDownTime:60,canCountDownClick:!0,layout:{labelCol:{span:4},wrapperCol:{span:12}},tailFormItemLayout:{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:4}}},model:{mfaType:"0",code:""},rules:{code:[{required:!0,message:"请填写收到的验证码",trigger:"blur"}]}}},computed:{loginError:function(){return this.$store.state.loginErrMsg}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$store.dispatch("verifyMfa",{mfaId:t.$store.getters.mfaId,code:t.model.code})}))},resend:function(){var e=this;if(this.canCountDownClick){this.$store.dispatch("sendMfa",this.model.mfaType),this.canCountDownClick=!1,this.countDownLabel=this.countDownTime+"秒后重新发送";var t=window.setInterval((function(){e.countDownTime--,e.countDownLabel=e.countDownTime+"秒后重新发送",e.countDownTime<0&&(window.clearInterval(t),e.countDownLabel="重新发送验证码",e.countDownTime=10,e.canCountDownClick=!0)}),1e3)}}}},l=r,i=o("2877"),s=Object(i["a"])(l,a,n,!1,null,null,null);t["default"]=s.exports}}]);
//# sourceMappingURL=mfa.b0f54476.js.map